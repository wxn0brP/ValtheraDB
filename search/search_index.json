{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"ValtheraDB: The Modular, Embedded Database for Ultimate Flexibility","text":"<p>Build your perfect data layer. ValtheraDB is a highly modular, embedded database for Bun, Node.js, and the browser, offering a familiar MongoDB-like API and unparalleled adaptability for your project's needs.</p> <p>ValtheraDB is designed for developers who need more than just a simple data store. Its unique modular architecture allows you to swap out core components, such as the storage engine, to perfectly match your requirements. Whether you're building a fast backend with Bun, a cross-platform desktop app, or a progressive web app, ValtheraDB provides the foundation you need.</p> <p>It is designed for small to medium-sized applications where simplicity and a custom-fit are more important than raw performance for massive datasets.</p>"},{"location":"#why-valtheradb","title":"Why ValtheraDB?","text":"<ul> <li>\ud83e\uddf1 Unmatched Modularity: ValtheraDB's biggest strength is its pluggable architecture. Don't like storing data in a directory of JSON files? Write your own adapter to use a single binary file, YAML, or any format you can imagine. The power is in your hands.</li> <li>\ud83e\udd1d Powerful Cross-Database Relations: Go beyond simple table joins. The relation engine can link data across entirely separate database instances. Imagine creating a relation between a <code>users</code> table in a <code>main</code> database and a <code>comments</code> table in a <code>logs</code> database\u2014ValtheraDB makes it possible.</li> <li>\ud83e\udde0 Familiar MongoDB-like API: Get up to speed quickly with a query API that will feel familiar to anyone who has worked with MongoDB. It's not identical, but it's close enough to make you productive from day one.</li> <li>\ud83c\udf10 Runs Everywhere, Optimized for Bun: ValtheraDB is a pure JavaScript solution that works in any modern JavaScript environment. It's optimized for Bun, has excellent support for Node.js, and can run in the browser using in-memory or localStorage adapters.</li> <li>\ud83d\ude80 Client-Server Ready: While it excels as an embedded database, ValtheraDB also fully supports a client-server architecture, giving you the flexibility to scale when you need to.</li> <li>\ud83d\udeab Zero Configuration: Get started with no fuss. By default, just point it to a directory, and you have a fully functional database.</li> </ul>"},{"location":"#core-concepts","title":"Core Concepts","text":"<ul> <li>Valthera: The main database instance.</li> <li>Adapters: Pluggable modules that define how data is stored and read. This allows you to switch from the default directory-based JSON storage to anything you need, like a single file, localStorage, or a custom format.</li> <li>Relations: A powerful engine that can define and query relationships between data, even across different database instances.</li> </ul>"},{"location":"#getting-started","title":"Getting Started","text":"<p>Ready to build your custom database solution? Dive into the documentation to learn more:</p> <ul> <li>Find Options: Learn about the available options for find queries.</li> <li>Relation: Understand how to create relationships within and between databases.</li> <li>Remote: Discover how to set up a client-server architecture.</li> <li>Updater: See how to quickly and easily handle data updates.</li> </ul>"},{"location":"find_opts/","title":"Find Options","text":""},{"location":"find_opts/#predefined-find-options-quick-reference-post-data-matching-processing","title":"Predefined Find Options Quick Reference (Post Data-Matching Processing)","text":""},{"location":"find_opts/#description","title":"Description","text":"<p>These options are applied as part of a post-processing step after matching objects are found in the database (<code>find</code> stage) but before the data is returned to the client. This process is designed to: 1. Reduce data transfer size by removing unnecessary fields or selecting only the required ones. 2. Customize results by transforming objects to meet specific requirements.  </p> <p>This optimization improves both performance and result usability, ensuring the client receives precisely the needed data in a compact form.</p>"},{"location":"find_opts/#execution-stack","title":"Execution Stack","text":"<ol> <li><code>transform</code></li> <li><code>exclude</code></li> <li><code>select</code></li> </ol>"},{"location":"find_opts/#operators","title":"Operators","text":""},{"location":"find_opts/#select","title":"<code>select</code>","text":"<p>Selects only specific fields to include in the final object.</p> <pre><code>// Original Object\n{\n    name: \"John Doe\",\n    email: \"john@example.com\",\n    age: 30,\n    status: \"active\"\n}\n\n// Find Options\n{\n    select: [\"name\", \"email\"]\n}\n\n// Result\n{\n    name: \"John Doe\",\n    email: \"john@example.com\"\n}\n</code></pre>"},{"location":"find_opts/#exclude","title":"<code>exclude</code>","text":"<p>Excludes specific fields from the object, removing unwanted data.</p> <pre><code>// Original Object\n{\n    name: \"John Doe\",\n    email: \"john@example.com\",\n    age: 30,\n    status: \"active\"\n}\n\n// Find Options\n{\n    exclude: [\"name\"]\n}\n\n// Result\n{\n    email: \"john@example.com\",\n    age: 30,\n    status: \"active\"\n}\n</code></pre>"},{"location":"find_opts/#transform","title":"<code>transform</code>","text":"<p>Applies a custom updater function to modify the object.</p> <pre><code>// Original Object\n{\n    name: \"John Doe\",\n    email: \"john@example.com\",\n    age: 30,\n    status: \"active\"\n}\n\n// Find Options\n{\n    transform: (doc) =&gt; {\n        doc.name = doc.name.toUpperCase();\n        return doc;\n    }\n}\n\n// Result\n{\n    name: \"JOHN DOE\",\n    email: \"john@example.com\",\n    age: 30,\n    status: \"active\"\n}\n</code></pre>"},{"location":"find_opts/#combined-example","title":"Combined Example","text":"<p>Using all operators together to demonstrate the execution stack.</p> <pre><code>// Original Object\n{\n    name: \"John Doe\",\n    email: \"john@example.com\",\n    age: 30,\n    status: \"active\"\n}\n\n// Find Options\n{\n    transform: (doc) =&gt; {\n        doc.newField = \"added\";\n        doc.status = \"inactive\";\n        return doc;\n    },\n    exclude: [\"email\", \"newField\"],\n    select: [\"name\", \"status\"]\n}\n\n// Execution Steps:\n1. transform:\n   {\n       name: \"John Doe\",\n       email: \"john@example.com\",\n       age: 30,\n       status: \"inactive\",\n       newField: \"added\"\n   }\n2. exclude:\n   {\n       name: \"John Doe\",\n       age: 30,\n       status: \"inactive\"\n   }\n3. select:\n   {\n       name: \"John Doe\",\n       status: \"inactive\"\n   }\n\n// Final Result:\n{\n    name: \"John Doe\",\n    status: \"inactive\"\n}\n</code></pre> <p>This structured flow ensures flexible and predictable results, making it a powerful tool for refining and manipulating data.</p>"},{"location":"graph/","title":"Graph Database Documentation (Deprecated)","text":"<p>This documentation provides an overview of the <code>Graph</code> class, which represents a graph database built on top of a custom <code>DataBase</code> module. The <code>Graph</code> class allows for managing graph structures by adding, removing, and querying edges between nodes in the database.</p>"},{"location":"graph/#class-graph","title":"Class: <code>Graph</code>","text":""},{"location":"graph/#constructor-graphdatabasefolder","title":"Constructor: <code>Graph(databaseFolder)</code>","text":"<p>Initializes the graph database.</p> <ul> <li>Parameters:</li> <li><code>databaseFolder</code> (<code>string</code>): The folder where the database is stored.</li> </ul>"},{"location":"graph/#method-async-addcollection-nodea-nodeb","title":"Method: <code>async add(collection, nodeA, nodeB)</code>","text":"<p>Adds an edge between two nodes in the specified collection.</p> <ul> <li>Parameters:</li> <li><code>collection</code> (<code>string</code>): The name of the collection.</li> <li><code>nodeA</code> (<code>string</code>): The first node.</li> <li><code>nodeB</code> (<code>string</code>): The second node.</li> <li>Returns:</li> <li><code>Promise&lt;Object&gt;</code>: A promise that resolves with the added edge.</li> </ul>"},{"location":"graph/#method-async-removecollection-nodea-nodeb","title":"Method: <code>async remove(collection, nodeA, nodeB)</code>","text":"<p>Removes an edge between two nodes in the specified collection.</p> <ul> <li>Parameters:</li> <li><code>collection</code> (<code>string</code>): The name of the collection.</li> <li><code>nodeA</code> (<code>string</code>): The first node.</li> <li><code>nodeB</code> (<code>string</code>): The second node.</li> <li>Returns:</li> <li><code>Promise&lt;boolean&gt;</code>: A promise that resolves to <code>true</code> if the edge is removed, otherwise <code>false</code>.</li> </ul>"},{"location":"graph/#method-async-findcollection-node","title":"Method: <code>async find(collection, node)</code>","text":"<p>Finds all edges with either node equal to the specified <code>node</code>.</p> <ul> <li>Parameters:</li> <li><code>collection</code> (<code>string</code>): The name of the collection.</li> <li><code>node</code> (<code>string</code>): The node to search for.</li> <li>Returns:</li> <li><code>Promise&lt;Object[]&gt;</code>: A promise that resolves with an array of edges.</li> </ul>"},{"location":"graph/#method-async-findonecollection-nodea-nodeb","title":"Method: <code>async findOne(collection, nodeA, nodeB)</code>","text":"<p>Finds one edge with either <code>nodeA</code> or <code>nodeB</code> as nodes.</p> <ul> <li>Parameters:</li> <li><code>collection</code> (<code>string</code>): The name of the collection.</li> <li><code>nodeA</code> (<code>string</code>): The first node.</li> <li><code>nodeB</code> (<code>string</code>): The second node.</li> <li>Returns:</li> <li><code>Promise&lt;Object|null&gt;</code>: A promise that resolves with the found edge or <code>null</code> if no edge is found.</li> </ul>"},{"location":"graph/#method-async-getallcollection","title":"Method: <code>async getAll(collection)</code>","text":"<p>Gets all edges in the specified collection.</p> <ul> <li>Parameters:</li> <li><code>collection</code> (<code>string</code>): The name of the collection.</li> <li>Returns:</li> <li><code>Promise&lt;Object[]&gt;</code>: A promise that resolves with all edges in the collection.</li> </ul>"},{"location":"graph/#method-async-getcollections","title":"Method: <code>async getCollections()</code>","text":"<p>Returns the names of all available collections in the database.</p> <ul> <li>Returns:</li> <li><code>Promise&lt;string[]&gt;</code>: A promise that resolves with an array of collection names.</li> </ul>"},{"location":"graph/#method-async-ensurecollectioncollection","title":"Method: <code>async ensureCollection(collection)</code>","text":"<p>Checks and creates the specified collection if it doesn't exist.</p> <ul> <li>Parameters:</li> <li><code>collection</code> (<code>string</code>): The name of the collection.</li> </ul>"},{"location":"graph/#method-async-issetcollectioncollection","title":"Method: <code>async issetCollection(collection)</code>","text":"<p>Checks if the specified collection exists.</p> <ul> <li>Parameters:</li> <li><code>collection</code> (<code>string</code>): The name of the collection.</li> <li>Returns:</li> <li><code>Promise&lt;boolean&gt;</code>: A promise that resolves to <code>true</code> if the collection exists, otherwise <code>false</code>.</li> </ul>"},{"location":"graph/#method-removecollectioncollection","title":"Method: <code>removeCollection(collection)</code>","text":"<p>Removes the specified collection from the database file system.</p> <ul> <li>Parameters:</li> <li><code>collection</code> (<code>string</code>): The name of the collection to remove.</li> <li>Returns:</li> <li><code>void</code></li> </ul>"},{"location":"relation/","title":"Relation Class Documentation","text":"<p>The <code>Relation</code> class provides a mechanism to handle relationships between collections in a database. It supports one-to-one, one-to-many, and many-to-many relationships.</p>"},{"location":"relation/#class-relation","title":"Class: <code>Relation</code>","text":""},{"location":"relation/#constructor-relationdbs","title":"Constructor: <code>Relation(dbs)</code>","text":"<p>Creates a new instance of the <code>Relation</code> class.</p> <ul> <li>Parameters:</li> <li><code>dbs</code> (<code>RelationTypes.DBS</code>): An object mapping database names to <code>DataBase</code> or <code>DataBaseRemote</code> instances.</li> </ul>"},{"location":"relation/#method-async-findonepath-search-relations-select","title":"Method: <code>async findOne(path, search, relations, select?)</code>","text":"<p>Finds a single entry in a collection and resolves its relations.</p> <ul> <li>Parameters:</li> <li><code>path</code> (<code>RelationTypes.Path</code>): A tuple specifying the database and collection.</li> <li><code>search</code> (<code>Search</code>): The search criteria.</li> <li><code>relations</code> (<code>RelationTypes.Relation</code>): The relations to resolve.</li> <li> <p><code>select</code> (<code>RelationTypes.FieldPath[]</code>, optional): Fields to select in the result.</p> </li> <li> <p>Returns:</p> </li> <li><code>Promise&lt;Object | null&gt;</code>: The found entry with resolved relations, or <code>null</code> if no match is found.</li> </ul>"},{"location":"relation/#method-async-findpath-search-relations-select-findopts","title":"Method: <code>async find(path, search, relations, select?, findOpts?)</code>","text":"<p>Finds multiple entries in a collection and resolves their relations.</p> <ul> <li>Parameters:</li> <li><code>path</code> (<code>RelationTypes.Path</code>): A tuple specifying the database and collection.</li> <li><code>search</code> (<code>Search</code>): The search criteria.</li> <li><code>relations</code> (<code>RelationTypes.Relation</code>): The relations to resolve.</li> <li><code>select</code> (<code>RelationTypes.FieldPath[]</code>, optional): Fields to select in the results.</li> <li> <p><code>findOpts</code> (<code>DbFindOpts</code>, optional): Options for the find operation.</p> </li> <li> <p>Returns:</p> </li> <li><code>Promise&lt;Object[]&gt;</code>: An array of found entries with resolved relations.</li> </ul>"},{"location":"relation/#relation-types","title":"Relation Types","text":"<p>The <code>Relation</code> class supports the following relation types:</p> <ol> <li>One-to-One (<code>\"1\"</code>): Resolves a single related entry.</li> <li>One-to-Many (<code>\"1n\"</code>): Resolves multiple related entries.</li> <li>Many-to-Many (<code>\"nm\"</code>): Resolves all entries in the related collection.</li> </ol>"},{"location":"relation/#example-usage","title":"Example Usage","text":"<pre><code>import Relation from \"@wxn0brp/db\";\nimport { autoCreate } from \"@wxn0brp/db\";\n\n// Create database instances\nconst db1 = autoCreate(\"path/to/db1\");\nconst db2 = autoCreate(\"path/to/db2\");\n\n// Define databases\nconst dbs = {\n    db1,\n    db2\n};\n\n// Define relations\nconst relations = {\n    author: {\n        path: [\"db1\", \"users\"],\n        pk: \"authorId\",\n        fk: \"_id\",\n        type: \"1\",\n        select: [\"name\", \"email\"]\n    },\n    comments: {\n        path: [\"db2\", \"comments\"],\n        pk: \"_id\",\n        fk: \"postId\",\n        type: \"1n\",\n        select: [\"content\", \"createdAt\"]\n    }\n};\n\n// Create a Relation instance\nconst relation = new Relation(dbs);\n\n// Find a single post with relations\nconst post = await relation.findOne(\n    [\"db1\", \"posts\"],\n    { _id: \"post123\" },\n    relations,\n    [[\"title\"], [\"author.name\"], [\"comments.content\"]]\n);\n\nconsole.log(post);\n\n// Find multiple posts with relations\nconst posts = await relation.find(\n    [\"db1\", \"posts\"],\n    { category: \"tech\" },\n    relations,\n    [[\"title\"], [\"author.name\"], [\"comments.content\"]],\n    { max: 10 }\n);\n\nconsole.log(posts);\n</code></pre> <p>This example demonstrates how to use the <code>Relation</code> class to resolve relationships between collections in different databases.</p>"},{"location":"remote/","title":"Remote Valthera and Graph Valthera Client Documentation","text":""},{"location":"remote/#remote-object-structure","title":"<code>remote</code> Object Structure","text":"<ul> <li><code>name</code> (<code>string</code>): The name of the Valthera.</li> <li><code>url</code> (<code>string</code>): The URL of the remote Valthera.</li> <li><code>auth</code> (<code>string</code>): The authentication token for accessing the Valthera.</li> </ul>"},{"location":"remote/#class-valtheraremoteremote","title":"Class: <code>ValtheraRemote(remote)</code>","text":"<p><code>ValtheraRemote</code> is an extended version of the <code>Valthera</code> class, designed to handle API requests. It provides the same functionalities as <code>Valthera</code>, but enables remote communication, allowing you to interact with Valthera through HTTP requests.</p>"},{"location":"remote/#example-usage","title":"Example Usage","text":"<pre><code>const remoteDB = new ValtheraRemote({\n    name: 'myRemoteDB',\n    url: 'https://example.com/db',\n    auth: 'your-auth-token'\n});\n</code></pre> <p>or</p> <pre><code>const remoteDB = new ValtheraRemote('https://dbName:token@example.com/db');\n</code></pre>"},{"location":"remote/#class-graphremoteremote","title":"Class: <code>GraphRemote(remote)</code>","text":"<p><code>GraphRemote</code> is an extension of the <code>Graph</code> class, specifically designed for working with graph Valthera's over HTTP. It supports querying and modifying graph data, providing methods tailored for graph operations such as adding nodes, edges, and executing graph queries.</p> <p>These constructors provide flexibility in initializing remote connections for both standard and graph-based Valthera databases.</p>"},{"location":"search_opts/","title":"Predefined Search Options Quick Reference","text":""},{"location":"search_opts/#operators","title":"Operators","text":""},{"location":"search_opts/#logical-operators","title":"Logical Operators","text":""},{"location":"search_opts/#and","title":"$and","text":"<p>Checks if all conditions in an array are true.</p> <pre><code>{\n  $and: [\n    { $gt: { age: 20 } },\n    { $exists: { name: true } }\n  ]\n}\n</code></pre>"},{"location":"search_opts/#or","title":"$or","text":"<p>Checks if at least one condition in an array is true.</p> <pre><code>{\n  $or: [\n    { $lt: { age: 20 } },\n    { $gt: { age: 60 } }\n  ]\n}\n</code></pre>"},{"location":"search_opts/#not","title":"$not","text":"<p>Negates a condition.</p> <pre><code>{\n  $not: { $type: { age: \"string\" } }\n}\n</code></pre>"},{"location":"search_opts/#comparison-operators","title":"Comparison Operators","text":""},{"location":"search_opts/#gt","title":"$gt","text":"<p>Greater than comparison.</p> <pre><code>{ $gt: { age: 18 } }\n</code></pre>"},{"location":"search_opts/#lt","title":"$lt","text":"<p>Less than comparison.</p> <pre><code>{ $lt: { score: 100 } }\n</code></pre>"},{"location":"search_opts/#gte","title":"$gte","text":"<p>Greater than or equal comparison.</p> <pre><code>{ $gte: { price: 9.99 } }\n</code></pre>"},{"location":"search_opts/#lte","title":"$lte","text":"<p>Less than or equal comparison.</p> <pre><code>{ $lte: { quantity: 50 } }\n</code></pre>"},{"location":"search_opts/#idgt","title":"$idGt","text":"<p>Greater than comparison for IDs (accepts <code>string</code> or <code>number</code>).</p> <pre><code>{ $idGt: { _id: \"miblu25k-d-g\" } }\n</code></pre>"},{"location":"search_opts/#idlt","title":"$idLt","text":"<p>Less than comparison for IDs (accepts <code>string</code> or <code>number</code>).</p> <pre><code>{ $idLt: { _id: \"miblu25k-d-g\" } }\n</code></pre>"},{"location":"search_opts/#idgte","title":"$idGte","text":"<p>Greater than or equal comparison for IDs (accepts <code>string</code> or <code>number</code>).</p> <pre><code>{ $idGte: { _id: \"miblu25k-d-g\" } }\n</code></pre>"},{"location":"search_opts/#idlte","title":"$idLte","text":"<p>Less than or equal comparison for IDs (accepts <code>string</code> or <code>number</code>).</p> <pre><code>{ $idLte: { _id: \"miblu25k-d-g\" } }\n</code></pre>"},{"location":"search_opts/#in","title":"$in","text":"<p>Checks if value is in an array.</p> <pre><code>{ $in: { status: [\"active\", \"pending\"] } }\n</code></pre>"},{"location":"search_opts/#nin","title":"$nin","text":"<p>Checks if value is not in an array.</p> <pre><code>{ $nin: { category: [\"archived\", \"deleted\"] } }\n</code></pre>"},{"location":"search_opts/#between","title":"$between","text":"<p>Checks if a number is between two values (inclusive).</p> <pre><code>{ $between: { age: [18, 65] } }\n</code></pre>"},{"location":"search_opts/#type-and-existence-operators","title":"Type and Existence Operators","text":""},{"location":"search_opts/#exists","title":"$exists","text":"<p>Checks if a field exists (or doesn't exist).</p> <pre><code>{ $exists: { email: true, deletedAt: false } }\n</code></pre>"},{"location":"search_opts/#type","title":"$type","text":"<p>Checks the type of a field.</p> <pre><code>{ $type: { age: \"number\", name: \"string\" } }\n</code></pre>"},{"location":"search_opts/#array-operators","title":"Array Operators","text":""},{"location":"search_opts/#arrinc","title":"$arrinc","text":"<p>Checks if an array includes at least one of the specified values.</p> <pre><code>{ $arrinc: { tags: [\"developer\", \"designer\"] } }\n</code></pre>"},{"location":"search_opts/#arrincall","title":"$arrincall","text":"<p>Checks if an array includes all of the specified values.</p> <pre><code>{ $arrincall: { permissions: [\"read\", \"write\"] } }\n</code></pre>"},{"location":"search_opts/#size","title":"$size","text":"<p>Checks the length of an array or string.</p> <pre><code>{ $size: { tags: 3 } }\n</code></pre>"},{"location":"search_opts/#string-operators","title":"String Operators","text":""},{"location":"search_opts/#regex","title":"$regex","text":"<p>Tests a string against a regular expression.</p> <pre><code>{ $regex: { email: /^[^@]+@[^@]+\\.[^@]+$/ } }\n</code></pre>"},{"location":"search_opts/#startswith","title":"$startsWith","text":"<p>Checks if a string starts with a specified value.</p> <pre><code>{ $startsWith: { name: \"Dr.\" } }\n</code></pre>"},{"location":"search_opts/#endswith","title":"$endsWith","text":"<p>Checks if a string ends with a specified value.</p> <pre><code>{ $endsWith: { email: \"@example.com\" } }\n</code></pre>"},{"location":"search_opts/#other-operators","title":"Other Operators","text":""},{"location":"search_opts/#subset","title":"$subset","text":"<p>Allows for skipping advanced validation for specific fields, applying only basic validation. This is useful when validation data may conflict with predefined functions (starting with $), while user data might also contain similar keys. Use this operator as a compromise.</p> <pre><code>{ $subset: { $lt: \"John Doe\" } } // check if \"$lt\" is \"John Doe\"\n</code></pre>"},{"location":"search_opts/#examples","title":"Examples","text":""},{"location":"search_opts/#complex-validation","title":"Complex Validation","text":"<pre><code>const criteria = {\n  $and: [\n    {\n      $or: [\n        { $gt: { age: 18 } },\n        { $exists: { guardianConsent: true } }\n      ]\n    },\n    {\n      $type: { email: \"string\" },\n      $regex: { email: /^[^@]+@[^@]+\\.[^@]+$/ }\n    },\n    {\n      $arrincall: { roles: [\"user\"] },\n      $not: { $in: { status: [\"banned\", \"suspended\"] } }\n    }\n  ]\n};\n\nconst user = {\n  age: 16,\n  guardianConsent: true,\n  email: \"john@example.com\",\n  roles: [\"user\", \"premium\"],\n  status: \"active\"\n};\n\nconst isValid = hasFieldsAdvanced(user, criteria); // true\n</code></pre>"},{"location":"search_opts/#nested-conditions","title":"Nested Conditions","text":"<pre><code>const criteria = {\n  $and: [\n    {\n      $exists: { address: true },\n      $type: { address: \"object\" }\n    },\n    {\n      $or: [\n        { $exists: { \"address.zipCode\": true } },\n        {\n          $and: [\n            { $exists: { \"address.city\": true } },\n            { $exists: { \"address.country\": true } }\n          ]\n        }\n      ]\n    }\n  ]\n};\n\nconst user = {\n  address: {\n    city: \"New York\",\n    country: \"USA\"\n  }\n};\n\nconst isValid = hasFieldsAdvanced(user, criteria); // true\n</code></pre>"},{"location":"search_opts/#error-handling","title":"Error Handling","text":"<p>The function will throw an error if: - The <code>fields</code> parameter is not an object - The <code>fields</code> parameter is null</p> <p>Always wrap the function call in a try-catch block when using with untrusted input:</p> <pre><code>try {\n  const isValid = hasFieldsAdvanced(obj, criteria);\n  // Handle result\n} catch (error) {\n  // Handle error\n  console.error('Validation error:', error.message);\n}\n</code></pre>"},{"location":"updater/","title":"Predefined Update Options Quick Reference","text":""},{"location":"updater/#arrays","title":"Arrays","text":""},{"location":"updater/#push","title":"<code>$push</code>","text":"<p>Adds an element to the end of an array.</p> <pre><code>{\n    $push: { tags: \"designer\" }\n}\n</code></pre> <p>Input:</p> <pre><code>{\n    tags: [\"developer\"]\n}\n</code></pre> <p>Output:</p> <pre><code>{\n    tags: [\"developer\", \"designer\"]\n}\n</code></pre>"},{"location":"updater/#pushset","title":"<code>$pushset</code>","text":"<p>Adds an element to the end of an array and removes duplicates.</p> <pre><code>{\n    $pushset: { tags: \"designer\" }\n}\n</code></pre> <p>Input:</p> <pre><code>{\n    tags: [\"developer\", \"designer\", \"developer\"]\n}\n</code></pre> <p>Output:</p> <pre><code>{\n    tags: [\"developer\", \"designer\"]\n}\n</code></pre>"},{"location":"updater/#pull","title":"<code>$pull</code>","text":"<p>Removes a specific element from an array.</p> <pre><code>{\n    $pull: { tags: \"developer\" }\n}\n</code></pre> <p>Input:</p> <pre><code>{\n    tags: [\"developer\", \"designer\"]\n}\n</code></pre> <p>Output:</p> <pre><code>{\n    tags: [\"designer\"]\n}\n</code></pre>"},{"location":"updater/#pullall","title":"<code>$pullall</code>","text":"<p>Removes all occurrences of specified elements from an array.</p> <pre><code>{\n    $pullall: { tags: [\"developer\", \"designer\"] }\n}\n</code></pre> <p>Input:</p> <pre><code>{\n    tags: [\"developer\", \"designer\", \"manager\"]\n}\n</code></pre> <p>Output:</p> <pre><code>{\n    tags: [\"manager\"]\n}\n</code></pre>"},{"location":"updater/#numbers","title":"Numbers","text":""},{"location":"updater/#inc","title":"<code>$inc</code>","text":"<p>Increments a numeric value by a given amount.</p> <pre><code>{\n    $inc: { counter: 1 }\n}\n</code></pre> <p>Input:</p> <pre><code>{\n    counter: 5\n}\n</code></pre> <p>Output:</p> <pre><code>{\n    counter: 6\n}\n</code></pre>"},{"location":"updater/#dec","title":"<code>$dec</code>","text":"<p>Decrements a numeric value by a given amount.</p> <pre><code>{\n    $dec: { counter: 1 }\n}\n</code></pre> <p>Input:</p> <pre><code>{\n    counter: 5\n}\n</code></pre> <p>Output:</p> <pre><code>{\n    counter: 4\n}\n</code></pre>"},{"location":"updater/#objects","title":"Objects","text":""},{"location":"updater/#merge","title":"<code>$merge</code>","text":"<p>Merges a nested object, adding or updating properties.</p> <pre><code>{\n    $merge: { settings: { theme: \"dark\" } }\n}\n</code></pre> <p>Input:</p> <pre><code>{\n    settings: { theme: \"light\", language: \"en\" }\n}\n</code></pre> <p>Output:</p> <pre><code>{\n    settings: { theme: \"dark\", language: \"en\" }\n}\n</code></pre>"},{"location":"updater/#others","title":"Others","text":""},{"location":"updater/#unset","title":"<code>$unset</code>","text":"<p>Removes a specified key from an object.</p> <pre><code>{\n    $unset: { age: true }\n}\n</code></pre> <p>Input:</p> <pre><code>{\n    name: \"John\",\n    age: 30\n}\n</code></pre> <p>Output:</p> <pre><code>{\n    name: \"John\"\n}\n</code></pre>"},{"location":"updater/#rename","title":"<code>$rename</code>","text":"<p>Renames a key in an object.</p> <pre><code>{\n    $rename: { firstName: \"name\" }\n}\n</code></pre> <p>Input:</p> <pre><code>{\n    firstName: \"John\",\n    lastName: \"Doe\"\n}\n</code></pre> <p>Output:</p> <pre><code>{\n    name: \"John\",\n    lastName: \"Doe\"\n}\n</code></pre>"},{"location":"valthera/","title":"Valthera","text":""},{"location":"valthera/#valthera-class-documentation","title":"Valthera Class Documentation","text":"<p>This documentation provides a detailed overview of the <code>Valthera</code> class, designed for performing CRUD operations on Valthera collections. The class uses the <code>dbActionC</code> module for file-based operations and <code>executorC</code> for managing execution tasks.</p>"},{"location":"valthera/#class-valthera","title":"Class: <code>Valthera</code>","text":""},{"location":"valthera/#constructor-valtherafolder-options-filecpu","title":"Constructor: <code>Valthera(folder, options={}, fileCpu?)</code>","text":"<p>Creates a new instance of the <code>Valthera</code> class.</p> <ul> <li>Parameters:</li> <li><code>folder</code> (<code>string</code>): The folder path where the database files are stored.</li> <li><code>options</code> (<code>object</code>): Optional configuration options.</li> <li><code>fileCpu</code> (<code>FileCpu</code>, optional): Custom file processor implementation. If not provided, defaults to <code>vFileCpu</code>.</li> </ul>"},{"location":"valthera/#method-ccollection","title":"Method: <code>c(collection)</code>","text":"<p>Creates a new instance of the <code>CollectionManager</code> class for the specified collection.</p> <ul> <li>Parameters:</li> <li><code>collection</code> (<code>string</code>): The name of the collection.</li> <li>Returns:</li> <li><code>CollectionManager</code>: A new instance of <code>CollectionManager</code>.</li> </ul>"},{"location":"valthera/#method-async-getcollections","title":"Method: <code>async getCollections()</code>","text":"<p>Gets the names of all available collections in the database.</p> <ul> <li>Returns:</li> <li><code>Promise&lt;string[]&gt;</code>: A promise that resolves with an array of collection names.</li> </ul>"},{"location":"valthera/#method-async-ensurecollectioncollection","title":"Method: <code>async ensureCollection(collection)</code>","text":"<p>Checks and creates the specified collection if it doesn't exist.</p> <ul> <li>Parameters:</li> <li> <p><code>collection</code> (<code>string</code>): The name of the collection to check.</p> </li> <li> <p>Returns:</p> </li> <li><code>Promise&lt;boolean&gt;</code>: A promise that resolves to <code>true</code> if the collection was created or already exists.</li> </ul>"},{"location":"valthera/#method-async-issetcollectioncollection","title":"Method: <code>async issetCollection(collection)</code>","text":"<p>Checks if a collection exists.</p> <ul> <li>Parameters:</li> <li><code>collection</code> (<code>string</code>): The name of the collection.</li> <li>Returns:</li> <li><code>Promise&lt;boolean&gt;</code>: A promise that resolves to <code>true</code> if the collection exists, otherwise <code>false</code>.</li> </ul>"},{"location":"valthera/#method-async-addt-extends-objectcollection-data-id_gentrue","title":"Method: <code>async add&lt;T extends object&gt;(collection, data, id_gen=true)</code>","text":"<p>Adds data to a specified collection.</p> <ul> <li>Parameters:</li> <li><code>collection</code> (<code>string</code>): The name of the collection.</li> <li><code>data</code> (<code>Object</code>): The data to add.</li> <li> <p><code>id_gen</code> (<code>boolean</code>, default: true): Whether to generate an ID for the entry.</p> </li> <li> <p>Returns:</p> </li> <li><code>Promise&lt;T &amp; { _id: string }&gt;</code>: If <code>id_gen</code> is true, a promise that resolves with the added data including a generated <code>_id</code>.</li> <li><code>Promise&lt;T&gt;</code>: If <code>id_gen</code> is false, a promise that resolves with the added data.</li> </ul>"},{"location":"valthera/#method-async-findt-datacollection-search-dbfindopts-findopts-context","title":"Method: <code>async find&lt;T = Data&gt;(collection, search, dbFindOpts, findOpts, context)</code>","text":"<p>Finds data in a collection based on a query.</p> <ul> <li>Parameters:</li> <li><code>collection</code> (<code>string</code>): The name of the collection.</li> <li><code>search</code> (<code>function|Object</code>, optional): The search query.</li> <li><code>dbFindOpts</code> (<code>Object</code>, optional): Search options (e.g., <code>max</code>, <code>reverse</code>).</li> <li><code>findOpts</code> (<code>Object</code>, optional): Options for updating the search result.</li> <li> <p><code>context</code> (<code>Object</code>, optional): The context object (for functions).</p> </li> <li> <p>Returns:</p> </li> <li><code>Promise&lt;Array&lt;T&gt;&gt;</code>: A promise that resolves with the matching data.</li> </ul>"},{"location":"valthera/#method-async-findonet-datacollection-search-findopts-context","title":"Method: <code>async findOne&lt;T = Data&gt;(collection, search, findOpts, context)</code>","text":"<p>Finds one matching entry in a collection.</p> <ul> <li>Parameters:</li> <li><code>collection</code> (<code>string</code>): The name of the collection.</li> <li><code>search</code> (<code>function|Object</code>, optional): The search query.</li> <li><code>findOpts</code> (<code>Object</code>, optional): Options for updating the search result.</li> <li> <p><code>context</code> (<code>Object</code>, optional): The context object (for functions).</p> </li> <li> <p>Returns:</p> </li> <li><code>Promise&lt;T|null&gt;</code>: A promise that resolves with the found entry, or <code>null</code> if no match is found.</li> </ul>"},{"location":"valthera/#method-async-updatet-datacollection-search-updater-context","title":"Method: <code>async update&lt;T = Data&gt;(collection, search, updater, context)</code>","text":"<p>Updates data in a collection.</p> <ul> <li>Parameters:</li> <li><code>collection</code> (<code>string</code>): The name of the collection.</li> <li><code>search</code> (<code>function|Object</code>): The search query.</li> <li><code>updater</code> (<code>function|Object</code>): Update arguments.</li> <li> <p><code>context</code> (<code>Object</code>, optional): The context object (for functions).</p> </li> <li> <p>Returns:</p> </li> <li><code>Promise&lt;boolean&gt;</code>: A promise that resolves when the data is updated.</li> </ul>"},{"location":"valthera/#method-async-updateonet-datacollection-search-updater-context","title":"Method: <code>async updateOne&lt;T = Data&gt;(collection, search, updater, context)</code>","text":"<p>Updates one entry in a collection.</p> <ul> <li>Parameters:</li> <li><code>collection</code> (<code>string</code>): The name of the collection.</li> <li><code>search</code> (<code>function|Object</code>): The search query.</li> <li><code>updater</code> (<code>function|Object</code>): Update arguments.</li> <li> <p><code>context</code> (<code>Object</code>, optional): The context object (for functions).</p> </li> <li> <p>Returns:</p> </li> <li><code>Promise&lt;boolean&gt;</code>: A promise that resolves when the data is updated.</li> </ul>"},{"location":"valthera/#method-async-updateoneoraddt-datacollection-search-updater-options","title":"Method: <code>async updateOneOrAdd&lt;T = Data&gt;(collection, search, updater, options)</code>","text":"<p>Updates one entry or adds a new one if it doesn't exist.</p> <ul> <li>Parameters:</li> <li><code>collection</code> (<code>string</code>): The name of the collection.</li> <li><code>search</code> (<code>function|Object</code>): The search query.</li> <li><code>updater</code> (<code>function|Object</code>): Update arguments.</li> <li> <p><code>options</code> (<code>Object</code>, optional): An object containing <code>add_arg</code>, <code>context</code>, and <code>id_gen</code>.</p> <ul> <li><code>add_arg</code> (<code>Object</code>): Data to add if no match is found.</li> <li><code>context</code> (<code>Object</code>): The context object (for functions).</li> <li><code>id_gen</code> (<code>boolean</code>, default: true): Whether to generate an ID for the new entry.</li> </ul> </li> <li> <p>Returns:</p> </li> <li><code>Promise&lt;boolean&gt;</code>: A promise that resolves to <code>true</code> if the entry was updated or created.</li> </ul>"},{"location":"valthera/#method-async-toggleonet-datacollection-search-data-context","title":"Method: <code>async toggleOne&lt;T = Data&gt;(collection, search, data, context)</code>","text":"<p>Asynchronously updates one entry in a database or adds a new one if it doesn't exist. Usage e.g. for toggling a flag.</p> <ul> <li>Parameters:</li> <li><code>collection</code> (<code>string</code>): The name of the collection.</li> <li><code>search</code> (<code>function|Object</code>): The search query.</li> <li><code>data</code> (<code>Object</code>, optional): The data to use.</li> <li> <p><code>context</code> (<code>Object</code>, optional): The context object (for functions).</p> </li> <li> <p>Returns:</p> </li> <li><code>Promise&lt;boolean&gt;</code>: A promise that resolves when the entry is toggled.</li> </ul>"},{"location":"valthera/#method-async-removet-datacollection-search-context","title":"Method: <code>async remove&lt;T = Data&gt;(collection, search, context)</code>","text":"<p>Removes data from a collection.</p> <ul> <li>Parameters:</li> <li><code>collection</code> (<code>string</code>): The name of the collection.</li> <li><code>search</code> (<code>function|Object</code>): The search query.</li> <li> <p><code>context</code> (<code>Object</code>, optional): The context object (for functions).</p> </li> <li> <p>Returns:</p> </li> <li><code>Promise&lt;boolean&gt;</code>: A promise that resolves when the data is removed.</li> </ul>"},{"location":"valthera/#method-async-removeonet-datacollection-search-context","title":"Method: <code>async removeOne&lt;T = Data&gt;(collection, search, context)</code>","text":"<p>Removes one entry from a collection.</p> <ul> <li>Parameters:</li> <li><code>collection</code> (<code>string</code>): The name of the collection.</li> <li><code>search</code> (<code>function|Object</code>): The search query.</li> <li> <p><code>context</code> (<code>Object</code>, optional): The context object (for functions).</p> </li> <li> <p>Returns:</p> </li> <li><code>Promise&lt;boolean&gt;</code>: A promise that resolves when the entry is removed.</li> </ul>"},{"location":"valthera/#method-async-removecollectioncollection","title":"Method: <code>async removeCollection(collection)</code>","text":"<p>Removes the specified collection from the Valthera file system.</p> <ul> <li>Parameters:</li> <li> <p><code>collection</code> (<code>string</code>): The name of the collection to remove.</p> </li> <li> <p>Returns:</p> </li> <li><code>Promise&lt;boolean&gt;</code>: A promise that resolves when the collection is removed.</li> </ul>"}]}